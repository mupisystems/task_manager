{% extends "base.html" %}

{% block content %}
<div class="container py-5">
  <div class="row g-4">
    <!-- Coluna de tarefas pendentes -->
    <div class="col-12 col-lg-6">
        <div class="border-0 shadow-sm h-100">
            <div class="card-header border-0 bg-warning bg-opacity-75 text-white p-3">
          <div class="d-flex align-items-center">
            <h5 class="text-white mb-0 flex-grow-1">Tarefas Pendentes</h5>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead class="bg-light">
                <tr>
                  <th class="text-secondary px-4 py-3">Tarefa</th>
                  <th class="text-secondary text-center">Categoria</th>
                  <th class="text-secondary text-center px-4">Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for task in tasks %}
                  {% if not task.status and task.assigned_to == user %}
                    <tr>
                      <td class="px-4">
                        <a href="{% url 'task_detail' task.pk %}" class="text-decoration-none text-dark fw-medium">{{ task.title }}</a>
                      </td>
                      <td class="text-center">
                        <span class="badge bg-secondary  bg-opacity-10  px-3 py-2">{{ task.category }}</span>
                      </td>
                      <td class="text-end px-4">
                        <a href="{% url 'task_update' task.pk %}" class="btn m-0 btn-light btn-sm me-2">Editar</a>
                        <a href="{% url 'task_delete' task.pk %}" class="btn m-0 btn-danger btn-sm">Excluir</a>
                      </td>
                    </tr>
                  {% endif %}
                {% empty %}
                  <tr>
                    <td colspan="3" class="text-center py-3">Nenhuma tarefa pendente.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Coluna de tarefas concluídas -->
    <div class="col-12 col-lg-6">
      <div class="border-0 shadow-sm h-100">
        <div class="card-header border-0 bg-success bg-opacity-75 text-white p-3">
          <div class="d-flex align-items-center">
            <h5 class="text-white mb-0 flex-grow-1">Tarefas Concluídas</h5>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-striped align-middle mb-0">
              <thead class="bg-light">
                <tr>
                  <th class="text-secondary px-4 py-3">Tarefa</th>
                  <th class="text-secondary text-center">Categoria</th>
                  <th class="text-secondary text-center px-4">Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for task in tasks %}
                  {% if task.status and task.assigned_to == user %}
                    <tr>
                      <td class="px-4">
                        <a href="{% url 'task_detail' task.pk %}" class="text-decoration-none text-dark fw-medium">{{ task.title }}</a>
                      </td>
                      <td class="text-center">
                        <span class="badge bg-opacity-10 bg-secondary px-3 py-2">{{ task.category }}</span>
                      </td>
                      <td class="text-end px-4">
                        <a href="{% url 'task_update' task.pk %}" class="btn m-0 btn-light btn-sm me-2">Editar</a>
                        <a href="{% url 'task_delete' task.pk %}" class="btn m-0 btn-danger btn-sm">Excluir</a>
                      </td>
                    </tr>
                  {% endif %}
                {% empty %}
                  <tr>
                    <td colspan="3" class="text-center py-3">Nenhuma tarefa concluída.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}